!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";n.r(t);var r={venues:{type:"array",default:[]}},o=n(1),c=n.n(o),l=n(0);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var u=wp.components,a=u.CheckboxControl,s=(u.ToggleControl,u.PanelBody),p=u.PanelRow,d=(u.RangeControl,u.SelectControl,u.TextControl,wp.element.Fragment),f=wp.data.withSelect,b=wp.blockEditor,m=b.InspectorControls,v=b.InnerBlocks,y=function(){var e=wp.data.select("core/block-editor").getBlocks().filter(function(e){return"bayder-school/schedule"===e.name});return e.length?e[0].innerBlocks.map(function(e){return e.attributes.venueId}):[]},O=y();wp.data.subscribe(function(){return O=y()});var j=f(function(e){var t=e("core").getEntityRecords("taxonomy","locations",{hide_empty:!0,parent:0}),n=t?e("core").getEntityRecords("postType","venues",{locations:t.map(function(e){return e.id})}):[];return{locations:t&&n?t.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach(function(t){c()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{venues:n.filter(function(t){return t.locations.includes(e.id)})})}):[]}})(function(e){var t=e.locations,n=e.clientId;return Object(l.createElement)("div",null,"Залы и Расписание",Object(l.createElement)(v,{renderAppender:function(){return Object(l.createElement)("div",null)}}),Object(l.createElement)(m,null,Object(l.createElement)(d,null,t&&t.map(function(e){return Object(l.createElement)(s,{title:e.name},e.venues&&e.venues.map(function(e){return Object(l.createElement)(p,null,Object(l.createElement)(a,{label:e.title.rendered,checked:O.includes(e.id),onChange:function(t){return t?function(e,t){var n=wp.blocks.createBlock("bayder-school/location",{venueId:e.id,title:e.title.rendered});wp.data.dispatch("core/block-editor").insertBlock(n,100,t,!1)}(e,n):function(e,t){var n=wp.data.select("core/block-editor").getBlock(t).innerBlocks.filter(function(t){return t.attributes.venueId===e.id})[0].clientId;wp.data.dispatch("core/block-editor").removeBlock(n,!1)}(e,n)}}))}))}))))}),w=wp.blockEditor.InnerBlocks;(0,wp.blocks.registerBlockType)("bayder-school/schedule",{title:"Залы и Расписание",description:"Выберите залы, чтобы добавить расписание",icon:"calendar-alt",category:"bayder-school",supports:{html:!1,className:!1,multiple:!1,reusable:!1,anchor:!0},attributes:r,edit:j,save:function(){return Object(l.createElement)("div",null,Object(l.createElement)(w.Content,null))}})}]);